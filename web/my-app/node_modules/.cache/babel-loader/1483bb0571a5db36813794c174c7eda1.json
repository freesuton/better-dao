{"ast":null,"code":"import _asyncToGenerator from\"/Users/hao/Desktop/dao-project/better-dao/web/my-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/hao/Desktop/dao-project/better-dao/web/my-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"/Users/hao/Desktop/dao-project/better-dao/web/my-app/node_modules/@babel/runtime/regenerator/index.js\";// import './css/index.min.css';\nimport React,{useState,useEffect,createContext,useContext,useRef}from'react';import{getWeb3}from'./utils.js';import{ethers}from'ethers';import Web3 from'web3';import{WalletConnectConnector}from'@web3-react/walletconnect-connector';import AnimalWorldCollectionABI from'./contracts/AnimalWorldCollection.json';import GemotteNFTCollection from'./contracts/GemotteNFTCollection.json';//popup\nimport metamask from\"./assets/svg/metamask.svg\";import walletConnect from\"./assets/svg/walletconnect-hexagon-white.svg\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";function Header(){var _useState=useState(false),_useState2=_slicedToArray(_useState,2),connected=_useState2[0],setConnected=_useState2[1];var _useState3=useState(undefined),_useState4=_slicedToArray(_useState3,2),web3=_useState4[0],setWeb3=_useState4[1];var _useState5=useState(undefined),_useState6=_slicedToArray(_useState5,2),contract=_useState6[0],setContract=_useState6[1];var _useState7=useState(undefined),_useState8=_slicedToArray(_useState7,2),accounts=_useState8[0],setAccounts=_useState8[1];var _useState9=useState(0),_useState10=_slicedToArray(_useState9,2),tokenCount=_useState10[0],setTokenCount=_useState10[1];//for popup\nvar _useState11=useState(false),_useState12=_slicedToArray(_useState11,2),showPop=_useState12[0],setShowPop=_useState12[1];//Detect if wallet status\nuseEffect(function(){console.log(\"useEffect\");if(!accounts){// console.log(\"wallet null\");\nsetConnected(false);}else{//disconnect after connected\nif(accounts.length===0){// console.log(\"wallet length = 0\");\nsetConnected(false);}window.ethereum.on('accountsChanged',function(accounts){setAccounts(accounts);});}init();// console.log(contract);\n},[accounts]);function init(){return _init.apply(this,arguments);}//wallet connect for button\nfunction _init(){_init=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var web3,accounts,networkId,contract,count;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return getWeb3();case 2:web3=_context.sent;_context.next=5;return web3.eth.getAccounts();case 5:accounts=_context.sent;setWeb3(web3);setAccounts(accounts);if(accounts){setConnected(true);}_context.next=11;return web3.eth.net.getId();case 11:networkId=_context.sent;// const deployedNetwork = RockPaperScissors.networks[networkId];\ncontract=new web3.eth.Contract(GemotteNFTCollection.abi,\"0x3a56590664fEF8f483063F3d714B88DafEe0Bbc7\");setContract(contract);// console.log(contract);\n//read token count\n_context.next=16;return contract.methods.tokenCount.call().call();case 16:count=_context.sent;// console.log(count);\nsetTokenCount(count);case 18:case\"end\":return _context.stop();}}},_callee);}));return _init.apply(this,arguments);}function walletButton(){return _walletButton.apply(this,arguments);}function _walletButton(){_walletButton=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:// web3Connect();\n// init();\nif(connected===false){// console.log(connected);\n// console.log(\"wallet connect false\")\nsetShowPop(!showPop);}// console.log(accounts[0]);\n// console.log(accounts.length);\n// await window.web3.eth.currentProvider.disconnect();\n// setConnected(false);\ncase 1:case\"end\":return _context2.stop();}}},_callee2);}));return _walletButton.apply(this,arguments);}function web3ConnectPop(){return _web3ConnectPop.apply(this,arguments);}function _web3ConnectPop(){_web3ConnectPop=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(){var _web,_contract,_accounts,count,_web2,provider,_web3;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:if(!window.ethereum){_context3.next=25;break;}_web=new Web3(window.ethereum);_context3.prev=2;_context3.next=5;return window.ethereum.enable();case 5:// Acccounts now exposed\n_contract=new _web.eth.Contract(GemotteNFTCollection.abi,\"0x3a56590664fEF8f483063F3d714B88DafEe0Bbc7\");setContract(_contract);_context3.next=9;return _web.eth.getAccounts();case 9:_accounts=_context3.sent;_context3.next=12;return _contract.methods.tokenCount.call().call();case 12:count=_context3.sent;setWeb3(_web);setAccounts(_accounts);setAccounts(_accounts[0]);setConnected(true);setShowPop(false);setTokenCount(count);_context3.next=23;break;case 21:_context3.prev=21;_context3.t0=_context3[\"catch\"](2);case 23:_context3.next=26;break;case 25:if(window.web3){// Use Mist/MetaMask's provider.\n_web2=window.web3;console.log(\"Injected web3 detected.\");}// Fallback to localhost; use dev console port by default...\nelse{provider=new Web3.providers.HttpProvider(\"http://localhost:9545\");_web3=new Web3(provider);console.log(\"No web3 instance injected, using Local web3.\");}case 26:case\"end\":return _context3.stop();}}},_callee3,null,[[2,21]]);}));return _web3ConnectPop.apply(this,arguments);}function mint(_x){return _mint.apply(this,arguments);}function _mint(){_mint=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(e){return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:e.preventDefault();_context4.next=3;return contract.methods.mint().send({from:accounts[0],value:ethers.utils.parseEther(\"0.05\")});case 3:// const count = await contract.methods.tokenCount.call().call();\nconsole.log(\"mint\");case 4:case\"end\":return _context4.stop();}}},_callee4);}));return _mint.apply(this,arguments);}function withdraw(_x2){return _withdraw.apply(this,arguments);}function _withdraw(){_withdraw=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee5(e){return _regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:e.preventDefault();_context5.next=3;return contract.methods.withdraw(\"0x846684d5db5A149bAb306FeeE123a268a9E8A7E4\",ethers.utils.parseEther(\"0.05\")).send({from:accounts[0]});case 3:case\"end\":return _context5.stop();}}},_callee5);}));return _withdraw.apply(this,arguments);}return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"header\",{className:\"header\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"header__container\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"header__logo\",\"data-clone\":\"logo\"}),/*#__PURE__*/_jsxs(\"nav\",{className:\"header__nav\",\"data-clone\":\"nav\",children:[/*#__PURE__*/_jsx(\"a\",{href:\"https://www.maelstrom-dao.com\",className:\"header__link\",style:{color:\"white\"},children:\"Home\"}),/*#__PURE__*/_jsx(\"a\",{href:\"https://opensea.io/collection/gemotte\",target:\"_blank\",className:\"header__link\",children:\"Opensea\"})]}),/*#__PURE__*/_jsxs(\"button\",{href:\"#whitelist\",className:\"header__btn\",\"data-clone\":\"mint-btn\",children:[/*#__PURE__*/_jsxs(\"span\",{onClick:walletButton,className:\"header__btn-wrapper\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"header__btn-text\",style:{overflow:\"hidden\"},children:connected?accounts:\"Connect Wallet\"}),/*#__PURE__*/_jsx(\"img\",{src:\"assets/images/glass.png\",alt:\"glass\",className:\"header__btn-glass\"})]}),showPop?/*#__PURE__*/_jsxs(\"div\",{style:{position:\"absolute\",color:\"white\"},children:[/*#__PURE__*/_jsxs(\"div\",{onClick:web3ConnectPop,className:\"header__btn-wrapper__pop\",style:{display:\"flex\"},children:[/*#__PURE__*/_jsx(\"img\",{src:metamask,style:{width:'30%'}}),/*#__PURE__*/_jsx(\"img\",{src:\"assets/images/glass.png\",alt:\"glass\",className:\"header__btn-glass\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"header__btn-wrapper__pop\",style:{display:\"flex\"},children:[/*#__PURE__*/_jsx(\"img\",{src:walletConnect,style:{width:'30%'}}),/*#__PURE__*/_jsx(\"img\",{src:\"assets/images/glass.png\",alt:\"glass\",className:\"header__btn-glass\"})]})]}):/*#__PURE__*/_jsx(_Fragment,{})]})]})}),/*#__PURE__*/_jsxs(\"section\",{className:\"intro\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"intro__background\",children:[/*#__PURE__*/_jsx(\"picture\",{children:/*#__PURE__*/_jsx(\"img\",{src:\"assets/images/intro/background@2x3.png\",alt:\"background\",className:\"intro-back\"})}),/*#__PURE__*/_jsx(\"img\",{src:\"assets/videos/stars.gif\",alt:\"\",className:\"intro-star\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"hero\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"hero__content\",style:{background:\"rgb(0,0,0,0.9)\",padding:\"2%\",borderRadius:\"20px\"},children:[/*#__PURE__*/_jsx(\"div\",{className:\"hero__title-wrapper\",children:connected?/*#__PURE__*/_jsxs(\"h2\",{className:\"hero__title\",children:[tokenCount,\"/5000\"]}):/*#__PURE__*/_jsx(\"p\",{className:\"hero__subtitle\",children:\"Please Connect Wallet\"})}),/*#__PURE__*/_jsx(\"p\",{className:\"hero__subtitle\",children:\"Mint Price: 0.05 ETH\"}),/*#__PURE__*/_jsxs(\"div\",{onClick:function onClick(e){return mint(e);},className:\"header__btn-wrapper\",style:{marginTop:\"6%\"},children:[/*#__PURE__*/_jsx(\"span\",{className:\"header__btn-text\",children:\"Mint\"}),/*#__PURE__*/_jsx(\"img\",{src:\"assets/images/glass.png\",alt:\"glass\",className:\"header__btn-glass\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"hero__ai\",children:[/*#__PURE__*/_jsxs(\"picture\",{children:[/*#__PURE__*/_jsx(\"source\",{srcSet:\"assets/images/intro/rocks@mobile.png\",media:\"(max-width: 768px)\",type:\"image/png\"}),/*#__PURE__*/_jsx(\"img\",{src:\"assets/images/intro/rocks@2x.png\",alt:\"rocks\",className:\"hero__rocks\"})]}),/*#__PURE__*/_jsxs(\"picture\",{children:[/*#__PURE__*/_jsx(\"source\",{srcSet:\"\",type:\"image/webp\"}),/*#__PURE__*/_jsx(\"img\",{src:\"assets/images/intro/path@2x.png\",alt:\"path\",className:\"hero__path\"})]}),/*#__PURE__*/_jsx(\"img\",{src:\"assets/images/intro/fighting-squirrel@2x.png\",alt:\"rabbits\",className:\"hero__rabbits\"}),/*#__PURE__*/_jsxs(\"picture\",{children:[/*#__PURE__*/_jsx(\"source\",{srcSet:\"assets/images/intro/path@mobile.png\",media:\"(max-width: 768px)\",type:\"image/png\"}),/*#__PURE__*/_jsx(\"img\",{src:\"assets/images/intro/path@2x.png\",alt:\"path\",className:\"hero__path\"})]})]})]})]}),/*#__PURE__*/_jsx(\"footer\",{className:\"footer\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"footer__container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"footer-content\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"footer-content__left\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"footer-content__title\",children:/*#__PURE__*/_jsx(\"span\",{children:\"Maelstrom DAO\"})}),/*#__PURE__*/_jsx(\"p\",{className:\"footer-content__text\",children:\"Make The World Better.\"}),/*#__PURE__*/_jsx(\"div\",{className:\"socials\",children:/*#__PURE__*/_jsx(\"div\",{className:\"socials__inner\",children:/*#__PURE__*/_jsx(\"a\",{href:\"https://twitter.com/BetterDAO\",className:\"socials__link\",children:/*#__PURE__*/_jsx(\"img\",{src:\"assets/images/socials/twitter.svg\",alt:\"twt\"})})})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"footer-content__right\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"footer-content__wrapper\",children:[/*#__PURE__*/_jsx(\"nav\",{className:\"footer-content__nav\",children:/*#__PURE__*/_jsx(\"a\",{className:\"footer-content__nav-link\",href:\"index.html\",children:\"Home\"})}),/*#__PURE__*/_jsx(\"nav\",{className:\"footer-content__nav\"})]})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"footer-copyright\",children:/*#__PURE__*/_jsx(\"p\",{className:\"footer-copyright__text\",children:\"Copyright \\xA9 2021. All rights reserved\"})})]})})]});}export default Header;","map":{"version":3,"sources":["/Users/hao/Desktop/dao-project/better-dao/web/my-app/src/Header.js"],"names":["React","useState","useEffect","createContext","useContext","useRef","getWeb3","ethers","Web3","WalletConnectConnector","AnimalWorldCollectionABI","GemotteNFTCollection","Header","connected","setConnected","undefined","web3","setWeb3","contract","setContract","accounts","setAccounts","tokenCount","setTokenCount","showPop","setShowPop","console","log","length","window","ethereum","on","init","eth","getAccounts","net","getId","networkId","Contract","abi","methods","call","count","walletButton","web3ConnectPop","enable","provider","providers","HttpProvider","mint","e","preventDefault","send","from","value","utils","parseEther","withdraw","color","overflow","position","display","metamask","width","walletConnect","background","padding","borderRadius","marginTop"],"mappings":"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","sourcesContent":["// import './css/index.min.css';\nimport React, {useState, useEffect,createContext,useContext,useRef} from 'react';\nimport { getWeb3 } from './utils.js';\nimport {ethers} from 'ethers'\nimport  Web3 from 'web3';\nimport { WalletConnectConnector } from '@web3-react/walletconnect-connector';\nimport AnimalWorldCollectionABI from './contracts/AnimalWorldCollection.json';\nimport GemotteNFTCollection from './contracts/GemotteNFTCollection.json';\n\n\n//popup\nimport metamask from './assets/svg/metamask.svg';\nimport walletConnect from './assets/svg/walletconnect-hexagon-white.svg';\n\nfunction Header() {\n  const [connected, setConnected] = useState(false);\n\n  const [web3, setWeb3] = useState(undefined);\n  const [contract, setContract] = useState(undefined);\n  const [accounts, setAccounts] = useState(undefined);\n\n\n\n\n  const [tokenCount,setTokenCount] = useState(0);\n\n  //for popup\n  const [showPop,setShowPop] = useState(false);\n\n\n\n  //Detect if wallet status\n  useEffect(() => {\n\n    console.log(\"useEffect\");\n\n    if (!accounts){\n      // console.log(\"wallet null\");\n      setConnected(false);\n    }else {\n      //disconnect after connected\n      if (accounts.length === 0){\n        // console.log(\"wallet length = 0\");\n        setConnected(false);\n      }\n      window.ethereum.on('accountsChanged', accounts => {\n        setAccounts(accounts);\n      });\n    }\n    init();\n\n    // console.log(contract);\n\n\n\n  }, [accounts]);\n\n   async function init()  {\n    const web3 = await getWeb3();\n    const accounts = await web3.eth.getAccounts();\n     setWeb3(web3);\n     setAccounts(accounts);\n\n     if (accounts){\n       setConnected(true);\n     }\n\n\n    const networkId = await web3.eth.net.getId();\n    // const deployedNetwork = RockPaperScissors.networks[networkId];\n\n    const contract = new web3.eth.Contract(\n        GemotteNFTCollection.abi,\n        \"0x3a56590664fEF8f483063F3d714B88DafEe0Bbc7\",\n    );\n\n\n\n     setContract(contract);\n     // console.log(contract);\n     //read token count\n     const count = await contract.methods.tokenCount.call().call();\n     // console.log(count);\n     setTokenCount(count);\n\n  }\n\n  //wallet connect for button\n\n\n  async function walletButton(){\n    // web3Connect();\n    // init();\n     if (connected === false){\n       // console.log(connected);\n       // console.log(\"wallet connect false\")\n        setShowPop(!showPop);\n     }\n     // console.log(accounts[0]);\n    // console.log(accounts.length);\n     // await window.web3.eth.currentProvider.disconnect();\n     // setConnected(false);\n  }\n\n  async function web3ConnectPop() {\n    // Modern dapp browsers...\n    if (window.ethereum) {\n      const web3 = new Web3(window.ethereum);\n      try {\n        // Request account access if needed\n        await window.ethereum.enable();\n        // Acccounts now exposed\n        const contract = new web3.eth.Contract(\n            GemotteNFTCollection.abi,\n            \"0x3a56590664fEF8f483063F3d714B88DafEe0Bbc7\",\n        );\n\n        setContract(contract);\n        const accounts = await web3.eth.getAccounts();\n        const count = await contract.methods.tokenCount.call().call();\n\n        setWeb3(web3);\n        setAccounts(accounts);\n        setAccounts(accounts[0])\n        setConnected(true);\n        setShowPop(false);\n        setTokenCount(count);\n\n      } catch (error) {\n\n      }\n    }\n    // Legacy dapp browsers...\n    else if (window.web3) {\n      // Use Mist/MetaMask's provider.\n      const web3 = window.web3;\n      console.log(\"Injected web3 detected.\");\n\n    }\n    // Fallback to localhost; use dev console port by default...\n    else {\n      const provider = new Web3.providers.HttpProvider(\n          \"http://localhost:9545\"\n      );\n      const web3 = new Web3(provider);\n      console.log(\"No web3 instance injected, using Local web3.\");\n    }\n  }\n\n\n\n  async function mint(e){\n     e.preventDefault();\n    await contract.methods.mint().send({from: accounts[0], value: ethers.utils.parseEther(\"0.05\")});\n    // const count = await contract.methods.tokenCount.call().call();\n    console.log(\"mint\");\n  }\n\n  async function withdraw(e){\n    e.preventDefault();\n    await contract.methods.withdraw(\"0x846684d5db5A149bAb306FeeE123a268a9E8A7E4\",ethers.utils.parseEther(\"0.05\")).send({from: accounts[0]});\n  }\n\n    return (\n      <div>\n\n        <header className=\"header\">\n\n          <div className=\"header__container\">\n            <div className=\"header__logo\" data-clone=\"logo\">\n            </div>\n\n            <nav className=\"header__nav\" data-clone=\"nav\">\n              <a href=\"https://www.maelstrom-dao.com\" className=\"header__link\" style={{color:\"white\"}}>Home</a>\n              <a href=\"https://opensea.io/collection/gemotte\" target=\"_blank\" className=\"header__link\">Opensea</a>\n\n              {/*<button onClick={(e) => withdraw(e)} style={{color:\"white\"}}>withdraw</button>*/}\n              {/*<a href=\"#benefits\" className=\"header__link\">Benefits</a>*/}\n\n              {/*<a href=\"#roadmap\" className=\"header__link\">Roadmap</a>*/}\n            </nav>\n\n            {/*<div>{connected ? \"true\" : \"false\"}</div>*/}\n\n\n\n            {/*<button onClick={mint} style={{color:\"white\"}}>Button</button>*/}\n            <button  href=\"#whitelist\" className=\"header__btn\" data-clone=\"mint-btn\">\n              <span onClick={walletButton} className=\"header__btn-wrapper\">\n                  <span  className=\"header__btn-text\" style={{overflow:\"hidden\"}}>{connected ? accounts: \"Connect Wallet\"}</span>\n                <img src=\"assets/images/glass.png\" alt=\"glass\" className=\"header__btn-glass\"/>\n              </span>\n\n              {/*<div className=\"header__btn-wrapper\"  style={{position:\"absolute\", color:\"white\"}}>*/}\n              {/*  <div  className=\"header__btn-text\" style={{overflow:\"hidden\"}}>mata</div>*/}\n              {/*  <img src=\"assets/images/glass.png\" alt=\"glass\" className=\"header__btn-glass\"/>*/}\n\n              {/*</div>*/}\n              {showPop ?\n                  <div style={{position:\"absolute\", color:\"white\"}}>\n                    <div onClick={web3ConnectPop} className=\"header__btn-wrapper__pop\"  style={{ display:\"flex\"}}>\n                      <img src={metamask} style={{width: '30%'}}/>\n                      <img src=\"assets/images/glass.png\" alt=\"glass\" className=\"header__btn-glass\"/>\n                    </div>\n                    <div className=\"header__btn-wrapper__pop\"  style={{ display:\"flex\"}}>\n                      <img src={walletConnect} style={{width: '30%'}}/>\n                      <img src=\"assets/images/glass.png\" alt=\"glass\" className=\"header__btn-glass\"/>\n                    </div>\n                  </div>\n                  :\n                <></>\n              }\n\n            </button>\n\n\n\n\n            {/*<button className=\"burgermenu\" id=\"burgermenu\"></button>*/}\n            {/*<NavBar handleLoginClick={handleLoginClick} />*/}\n\n            {/*<PopupSignIn />*/}\n          </div>\n\n\n        </header>\n        <section className=\"intro\">\n          <div className=\"intro__background\">\n            <picture>\n\n              <img src=\"assets/images/intro/background@2x3.png\" alt=\"background\" className=\"intro-back\"/>\n            </picture>\n            <img src=\"assets/videos/stars.gif\" alt=\"\" className=\"intro-star\"/>\n          </div>\n          <div className=\"hero\">\n            <div className=\"hero__content\" style={{background:\"rgb(0,0,0,0.9)\", padding:\"2%\", borderRadius:\"20px\"}}>\n              <div className=\"hero__title-wrapper\" >\n                {connected ?\n                    <h2 className=\"hero__title\">{tokenCount}/5000</h2> :\n                    <p className=\"hero__subtitle\">Please Connect Wallet</p>}\n\n              </div>\n              <p className=\"hero__subtitle\">\n                Mint Price: 0.05 ETH\n              </p>\n\n              <div onClick={(e) => mint(e)} className=\"header__btn-wrapper\" style={{marginTop:\"6%\"}}>\n                    <span className=\"header__btn-text\">Mint</span>\n                    <img src=\"assets/images/glass.png\" alt=\"glass\" className=\"header__btn-glass\"/>\n              </div>\n\n            </div>\n            <div className=\"hero__ai\">\n              <picture>\n                <source srcSet=\"assets/images/intro/rocks@mobile.png\" media=\"(max-width: 768px)\" type=\"image/png\"/>\n                <img src=\"assets/images/intro/rocks@2x.png\" alt=\"rocks\" className=\"hero__rocks\"/>\n              </picture>\n              <picture>\n                <source srcSet=\"\" type=\"image/webp\"/>\n                <img src=\"assets/images/intro/path@2x.png\" alt=\"path\" className=\"hero__path\"/>\n              </picture>\n              <img src=\"assets/images/intro/fighting-squirrel@2x.png\" alt=\"rabbits\" className=\"hero__rabbits\"/>\n              <picture>\n                <source srcSet=\"assets/images/intro/path@mobile.png\" media=\"(max-width: 768px)\" type=\"image/png\"/>\n                <img src=\"assets/images/intro/path@2x.png\" alt=\"path\" className=\"hero__path\"/>\n              </picture>\n            </div>\n          </div>\n        </section>\n        <footer className=\"footer\">\n          <div className=\"footer__container\">\n            <div className=\"footer-content\">\n              <div className=\"footer-content__left\">\n                <h2 className=\"footer-content__title\">\n                  <span>Maelstrom DAO</span>\n\n                </h2>\n                <p className=\"footer-content__text\">\n                  Make The World Better.\n                </p>\n                <div className=\"socials\">\n                  <div className=\"socials__inner\">\n                    <a href=\"https://twitter.com/BetterDAO\" className=\"socials__link\">\n                      <img src=\"assets/images/socials/twitter.svg\" alt=\"twt\"/>\n                    </a>\n\n                  </div>\n                </div>\n              </div>\n              <div className=\"footer-content__right\">\n                <div className=\"footer-content__wrapper\">\n                  <nav className=\"footer-content__nav\">\n                    <a className=\"footer-content__nav-link\" href=\"index.html\">Home</a>\n                    {/*<a className=\"footer-content__nav-link\" href=\"#rarity\">Rarity</a>*/}\n                    {/*<a className=\"footer-content__nav-link\" href=\"#benefits\">Benefits</a>*/}\n                  </nav>\n                  <nav className=\"footer-content__nav\">\n\n                    {/*<a className=\"footer-content__nav-link\" href=\"#roadmap\">Roadmap</a>*/}\n                    {/*<a className=\"footer-content__nav-link\" href=\"#faq\">FAQ</a>*/}\n                  </nav>\n\n                </div>\n              </div>\n            </div>\n            <div className=\"footer-copyright\">\n              <p className=\"footer-copyright__text\">Copyright © 2021. All rights reserved</p>\n\n            </div>\n          </div>\n        </footer>\n      </div>\n\n  );\n}\n\n\n\nexport default Header;"]},"metadata":{},"sourceType":"module"}