{"ast":null,"code":"import _asyncToGenerator from\"/Users/hao/Desktop/better-dao/web/my-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/hao/Desktop/better-dao/web/my-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"/Users/hao/Desktop/better-dao/web/my-app/node_modules/@babel/runtime/regenerator/index.js\";// import './css/index.min.css';\nimport React,{useState,useEffect,createContext,useContext}from'react';import{getWeb3}from'./utils.js';import{ethers}from'ethers';import Web3 from'web3';import AnimalWorldCollectionABI from'./contracts/AnimalWorldCollection.json';import GemotteNFTCollection from'./contracts/GemotteNFTCollection.json';import Home from\"./Home\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Header(){var _useState=useState(false),_useState2=_slicedToArray(_useState,2),connected=_useState2[0],setConnected=_useState2[1];var _useState3=useState(undefined),_useState4=_slicedToArray(_useState3,2),web3=_useState4[0],setWeb3=_useState4[1];var _useState5=useState(undefined),_useState6=_slicedToArray(_useState5,2),contract=_useState6[0],setContract=_useState6[1];var _useState7=useState(undefined),_useState8=_slicedToArray(_useState7,2),accounts=_useState8[0],setAccounts=_useState8[1];var _useState9=useState(0),_useState10=_slicedToArray(_useState9,2),tokenCount=_useState10[0],setTokenCount=_useState10[1];//Detect if wallet status\nuseEffect(function(){console.log(\"useEffect\");if(!accounts){console.log(\"wallet null\");setConnected(false);}else{//disconnect after connected\nif(accounts.length===0){console.log(\"wallet length = 0\");setConnected(false);}}init();console.log(contract);window.ethereum.on('accountsChanged',function(accounts){setAccounts(accounts);});},[accounts]);function init(){return _init.apply(this,arguments);}//wallet connect for button\nfunction _init(){_init=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var web3,accounts,networkId,contract,count;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return getWeb3();case 2:web3=_context.sent;_context.next=5;return web3.eth.getAccounts();case 5:accounts=_context.sent;setWeb3(web3);setAccounts(accounts);if(accounts){setConnected(true);}_context.next=11;return web3.eth.net.getId();case 11:networkId=_context.sent;// const deployedNetwork = RockPaperScissors.networks[networkId];\ncontract=new web3.eth.Contract(GemotteNFTCollection.abi,\"0x3a56590664fEF8f483063F3d714B88DafEe0Bbc7\");setContract(contract);console.log(contract);//read token count\n_context.next=17;return contract.methods.tokenCount.call().call();case 17:count=_context.sent;console.log(count);setTokenCount(count);case 20:case\"end\":return _context.stop();}}},_callee);}));return _init.apply(this,arguments);}function web3Connect(){return _web3Connect.apply(this,arguments);}function _web3Connect(){_web3Connect=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var _web,_web2,provider,_web3;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:if(!window.ethereum){_context2.next=12;break;}_web=new Web3(window.ethereum);_context2.prev=2;_context2.next=5;return window.ethereum.enable();case 5:// Acccounts now exposed\nsetConnected(true);_context2.next=10;break;case 8:_context2.prev=8;_context2.t0=_context2[\"catch\"](2);case 10:_context2.next=13;break;case 12:if(window.web3){// Use Mist/MetaMask's provider.\n_web2=window.web3;console.log(\"Injected web3 detected.\");}// Fallback to localhost; use dev console port by default...\nelse{provider=new Web3.providers.HttpProvider(\"http://localhost:9545\");_web3=new Web3(provider);console.log(\"No web3 instance injected, using Local web3.\");}case 13:case\"end\":return _context2.stop();}}},_callee2,null,[[2,8]]);}));return _web3Connect.apply(this,arguments);}function walletButton(){return _walletButton.apply(this,arguments);}function _walletButton(){_walletButton=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(){return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:web3Connect();// init();\nif(connected===false){console.log(connected);console.log(\"wallet connect false\");}// console.log(accounts[0]);\n// console.log(accounts.length);\n// await window.web3.eth.currentProvider.disconnect();\n// setConnected(false);\ncase 2:case\"end\":return _context3.stop();}}},_callee3);}));return _walletButton.apply(this,arguments);}function mint(_x){return _mint.apply(this,arguments);}function _mint(){_mint=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(e){return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:e.preventDefault();_context4.next=3;return contract.methods.mint().send({from:accounts[0],value:ethers.utils.parseEther(\"0.05\")});case 3:// const count = await contract.methods.tokenCount.call().call();\nconsole.log(\"mint\");case 4:case\"end\":return _context4.stop();}}},_callee4);}));return _mint.apply(this,arguments);}function withdraw(_x2){return _withdraw.apply(this,arguments);}function _withdraw(){_withdraw=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee5(e){return _regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:e.preventDefault();_context5.next=3;return contract.methods.withdraw(\"0x6DabeA5B1a9e53C6b20Bf32072F2fB260F405991\",ethers.utils.parseEther(\"0.05\")).send({from:accounts[0]});case 3:case\"end\":return _context5.stop();}}},_callee5);}));return _withdraw.apply(this,arguments);}return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"header\",{className:\"header\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"header__container\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"header__logo\",\"data-clone\":\"logo\"}),/*#__PURE__*/_jsxs(\"nav\",{className:\"header__nav\",\"data-clone\":\"nav\",children:[/*#__PURE__*/_jsx(\"a\",{href:\"https://www.better-dao.com\",className:\"header__link\",style:{color:\"white\"},children:\"Home\"}),/*#__PURE__*/_jsx(\"a\",{href:\"https://opensea.io/\",target:\"_blank\",className:\"header__link\",children:\"Opensea\"})]}),/*#__PURE__*/_jsx(\"div\",{children:connected?\"true\":\"false\"}),/*#__PURE__*/_jsx(\"button\",{href:\"#whitelist\",className:\"header__btn\",\"data-clone\":\"mint-btn\",children:/*#__PURE__*/_jsxs(\"span\",{onClick:walletButton,className:\"header__btn-wrapper\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"header__btn-text\",style:{overflow:\"hidden\"},children:connected?accounts:\"Connect Wallet\"}),/*#__PURE__*/_jsx(\"img\",{src:\"assets/images/glass.png\",alt:\"glass\",className:\"header__btn-glass\"})]})}),/*#__PURE__*/_jsx(\"button\",{className:\"burgermenu\",id:\"burgermenu\"})]})}),/*#__PURE__*/_jsxs(\"section\",{className:\"intro\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"intro__background\",children:[/*#__PURE__*/_jsx(\"picture\",{children:/*#__PURE__*/_jsx(\"img\",{src:\"assets/images/intro/background@2x3.png\",alt:\"background\",className:\"intro-back\"})}),/*#__PURE__*/_jsx(\"img\",{src:\"assets/videos/stars.gif\",alt:\"\",className:\"intro-star\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"hero\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"hero__content\",style:{background:\"rgb(0,0,0,0.9)\",padding:\"2%\",borderRadius:\"20px\"},children:[/*#__PURE__*/_jsx(\"div\",{className:\"hero__title-wrapper\",children:/*#__PURE__*/_jsxs(\"h1\",{className:\"hero__title\",children:[tokenCount,\"/5000\"]})}),/*#__PURE__*/_jsx(\"p\",{className:\"hero__subtitle\",children:\"Mint Price: 0.05 ETH\"}),/*#__PURE__*/_jsxs(\"div\",{onClick:function onClick(e){return mint(e);},className:\"header__btn-wrapper\",style:{marginTop:\"6%\"},children:[/*#__PURE__*/_jsx(\"span\",{className:\"header__btn-text\",children:\"Mint\"}),/*#__PURE__*/_jsx(\"img\",{src:\"assets/images/glass.png\",alt:\"glass\",className:\"header__btn-glass\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"hero__ai\",children:[/*#__PURE__*/_jsxs(\"picture\",{children:[/*#__PURE__*/_jsx(\"source\",{srcSet:\"assets/images/intro/rocks@mobile.png\",media:\"(max-width: 768px)\",type:\"image/png\"}),/*#__PURE__*/_jsx(\"img\",{src:\"assets/images/intro/rocks@2x.png\",alt:\"rocks\",className:\"hero__rocks\"})]}),/*#__PURE__*/_jsxs(\"picture\",{children:[/*#__PURE__*/_jsx(\"source\",{srcSet:\"\",type:\"image/webp\"}),/*#__PURE__*/_jsx(\"img\",{src:\"assets/images/intro/path@2x.png\",alt:\"path\",className:\"hero__path\"})]}),/*#__PURE__*/_jsx(\"img\",{src:\"assets/images/intro/fighting-squirrel@2x.png\",alt:\"rabbits\",className:\"hero__rabbits\"}),/*#__PURE__*/_jsxs(\"picture\",{children:[/*#__PURE__*/_jsx(\"source\",{srcSet:\"assets/images/intro/path@mobile.png\",media:\"(max-width: 768px)\",type:\"image/png\"}),/*#__PURE__*/_jsx(\"img\",{src:\"assets/images/intro/path@2x.png\",alt:\"path\",className:\"hero__path\"})]})]})]})]}),/*#__PURE__*/_jsx(\"footer\",{className:\"footer\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"footer__container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"footer-content\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"footer-content__left\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"footer-content__title\",children:/*#__PURE__*/_jsx(\"span\",{children:\"BetterDAO\"})}),/*#__PURE__*/_jsx(\"p\",{className:\"footer-content__text\",children:\"Make The World Better.\"}),/*#__PURE__*/_jsx(\"div\",{className:\"socials\",children:/*#__PURE__*/_jsx(\"div\",{className:\"socials__inner\",children:/*#__PURE__*/_jsx(\"a\",{href:\"https://twitter.com/BetterDAO\",className:\"socials__link\",children:/*#__PURE__*/_jsx(\"img\",{src:\"assets/images/socials/twitter.svg\",alt:\"twt\"})})})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"footer-content__right\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"footer-content__wrapper\",children:[/*#__PURE__*/_jsx(\"nav\",{className:\"footer-content__nav\",children:/*#__PURE__*/_jsx(\"a\",{className:\"footer-content__nav-link\",href:\"index.html\",children:\"Home\"})}),/*#__PURE__*/_jsx(\"nav\",{className:\"footer-content__nav\"})]})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"footer-copyright\",children:/*#__PURE__*/_jsx(\"p\",{className:\"footer-copyright__text\",children:\"Copyright \\xA9 2021. All rights reserved\"})})]})})]});}export default Header;","map":{"version":3,"sources":["/Users/hao/Desktop/better-dao/web/my-app/src/Header.js"],"names":["React","useState","useEffect","createContext","useContext","getWeb3","ethers","Web3","AnimalWorldCollectionABI","GemotteNFTCollection","Home","Header","connected","setConnected","undefined","web3","setWeb3","contract","setContract","accounts","setAccounts","tokenCount","setTokenCount","console","log","length","init","window","ethereum","on","eth","getAccounts","net","getId","networkId","Contract","abi","methods","call","count","web3Connect","enable","provider","providers","HttpProvider","walletButton","mint","e","preventDefault","send","from","value","utils","parseEther","withdraw","color","overflow","background","padding","borderRadius","marginTop"],"mappings":"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","sourcesContent":["// import './css/index.min.css';\nimport React, {useState, useEffect,createContext,useContext} from 'react';\nimport { getWeb3 } from './utils.js';\nimport {ethers} from 'ethers'\nimport  Web3 from 'web3';\nimport AnimalWorldCollectionABI from './contracts/AnimalWorldCollection.json';\nimport GemotteNFTCollection from './contracts/GemotteNFTCollection.json';\nimport Home from \"./Home\";\n\nfunction Header() {\n  const [connected, setConnected] = useState(false);\n\n  const [web3, setWeb3] = useState(undefined);\n  const [contract, setContract] = useState(undefined);\n  const [accounts, setAccounts] = useState(undefined);\n\n\n  const [tokenCount,setTokenCount] = useState(0);\n\n\n  //Detect if wallet status\n  useEffect(() => {\n\n    console.log(\"useEffect\");\n\n    if (!accounts){\n      console.log(\"wallet null\");\n      setConnected(false);\n    }else {\n      //disconnect after connected\n      if (accounts.length === 0){\n        console.log(\"wallet length = 0\");\n        setConnected(false);\n      }\n    }\n    init();\n\n    console.log(contract);\n\n\n    window.ethereum.on('accountsChanged', accounts => {\n      setAccounts(accounts);\n    });\n\n  }, [accounts]);\n\n\n\n   async function init()  {\n    const web3 = await getWeb3();\n    const accounts = await web3.eth.getAccounts();\n     setWeb3(web3);\n     setAccounts(accounts);\n\n     if (accounts){\n       setConnected(true);\n     }\n\n\n    const networkId = await web3.eth.net.getId();\n    // const deployedNetwork = RockPaperScissors.networks[networkId];\n\n    const contract = new web3.eth.Contract(\n        GemotteNFTCollection.abi,\n        \"0x3a56590664fEF8f483063F3d714B88DafEe0Bbc7\",\n    );\n\n\n\n     setContract(contract);\n     console.log(contract);\n     //read token count\n     const count = await contract.methods.tokenCount.call().call();\n     console.log(count);\n     setTokenCount(count);\n\n  }\n\n  //wallet connect for button\n  async function web3Connect() {\n    // Modern dapp browsers...\n    if (window.ethereum) {\n      const web3 = new Web3(window.ethereum);\n      try {\n        // Request account access if needed\n        await window.ethereum.enable();\n        // Acccounts now exposed\n        setConnected(true);\n\n      } catch (error) {\n\n      }\n    }\n    // Legacy dapp browsers...\n    else if (window.web3) {\n      // Use Mist/MetaMask's provider.\n      const web3 = window.web3;\n      console.log(\"Injected web3 detected.\");\n\n    }\n    // Fallback to localhost; use dev console port by default...\n    else {\n      const provider = new Web3.providers.HttpProvider(\n          \"http://localhost:9545\"\n      );\n      const web3 = new Web3(provider);\n      console.log(\"No web3 instance injected, using Local web3.\");\n\n    }\n  }\n\n  async function walletButton(){\n    web3Connect();\n    // init();\n     if (connected === false){\n       console.log(connected);\n       console.log(\"wallet connect false\")\n\n     }\n     // console.log(accounts[0]);\n    // console.log(accounts.length);\n     // await window.web3.eth.currentProvider.disconnect();\n     // setConnected(false);\n  }\n\n  async function mint(e){\n     e.preventDefault();\n    await contract.methods.mint().send({from: accounts[0], value: ethers.utils.parseEther(\"0.05\")});\n    // const count = await contract.methods.tokenCount.call().call();\n    console.log(\"mint\");\n  }\n\n  async function withdraw(e){\n    e.preventDefault();\n    await contract.methods.withdraw(\"0x6DabeA5B1a9e53C6b20Bf32072F2fB260F405991\",ethers.utils.parseEther(\"0.05\")).send({from: accounts[0]});\n  }\n\n    return (\n      <div>\n        <header className=\"header\">\n          <div className=\"header__container\">\n            <div className=\"header__logo\" data-clone=\"logo\">\n            </div>\n            <nav className=\"header__nav\" data-clone=\"nav\">\n              <a href=\"https://www.better-dao.com\" className=\"header__link\" style={{color:\"white\"}}>Home</a>\n              <a href=\"https://opensea.io/\" target=\"_blank\" className=\"header__link\">Opensea</a>\n              {/*<button onClick={(e) => withdraw(e)} style={{color:\"white\"}}>withdraw</button>*/}\n              {/*<a href=\"#benefits\" className=\"header__link\">Benefits</a>*/}\n\n              {/*<a href=\"#roadmap\" className=\"header__link\">Roadmap</a>*/}\n            </nav>\n            <div>{connected ? \"true\" : \"false\"}</div>\n\n\n\n            {/*<button onClick={mint} style={{color:\"white\"}}>Button</button>*/}\n            <button  href=\"#whitelist\" className=\"header__btn\" data-clone=\"mint-btn\">\n                <span onClick={walletButton} className=\"header__btn-wrapper\">\n\n                    <span  className=\"header__btn-text\" style={{overflow:\"hidden\"}}>{connected ? accounts: \"Connect Wallet\"}</span>\n                  <img src=\"assets/images/glass.png\" alt=\"glass\" className=\"header__btn-glass\"/>\n                </span>\n            </button>\n            <button className=\"burgermenu\" id=\"burgermenu\"></button>\n          </div>\n        </header>\n        <section className=\"intro\">\n          <div className=\"intro__background\">\n            <picture>\n\n              <img src=\"assets/images/intro/background@2x3.png\" alt=\"background\" className=\"intro-back\"/>\n            </picture>\n            <img src=\"assets/videos/stars.gif\" alt=\"\" className=\"intro-star\"/>\n          </div>\n          <div className=\"hero\">\n            <div className=\"hero__content\" style={{background:\"rgb(0,0,0,0.9)\", padding:\"2%\", borderRadius:\"20px\"}}>\n              <div className=\"hero__title-wrapper\" >\n\n                <h1 className=\"hero__title\">{tokenCount}/5000</h1>\n\n              </div>\n              <p className=\"hero__subtitle\">\n                Mint Price: 0.05 ETH\n              </p>\n\n              <div onClick={(e) => mint(e)} className=\"header__btn-wrapper\" style={{marginTop:\"6%\"}}>\n                    <span className=\"header__btn-text\">Mint</span>\n                    <img src=\"assets/images/glass.png\" alt=\"glass\" className=\"header__btn-glass\"/>\n              </div>\n\n            </div>\n            <div className=\"hero__ai\">\n              <picture>\n                <source srcSet=\"assets/images/intro/rocks@mobile.png\" media=\"(max-width: 768px)\" type=\"image/png\"/>\n                <img src=\"assets/images/intro/rocks@2x.png\" alt=\"rocks\" className=\"hero__rocks\"/>\n              </picture>\n              <picture>\n                <source srcSet=\"\" type=\"image/webp\"/>\n                <img src=\"assets/images/intro/path@2x.png\" alt=\"path\" className=\"hero__path\"/>\n              </picture>\n              <img src=\"assets/images/intro/fighting-squirrel@2x.png\" alt=\"rabbits\" className=\"hero__rabbits\"/>\n              <picture>\n                <source srcSet=\"assets/images/intro/path@mobile.png\" media=\"(max-width: 768px)\" type=\"image/png\"/>\n                <img src=\"assets/images/intro/path@2x.png\" alt=\"path\" className=\"hero__path\"/>\n              </picture>\n            </div>\n          </div>\n        </section>\n        <footer className=\"footer\">\n          <div className=\"footer__container\">\n            <div className=\"footer-content\">\n              <div className=\"footer-content__left\">\n                <h2 className=\"footer-content__title\">\n                  <span>BetterDAO</span>\n\n                </h2>\n                <p className=\"footer-content__text\">\n                  Make The World Better.\n                </p>\n                <div className=\"socials\">\n                  <div className=\"socials__inner\">\n                    <a href=\"https://twitter.com/BetterDAO\" className=\"socials__link\">\n                      <img src=\"assets/images/socials/twitter.svg\" alt=\"twt\"/>\n                    </a>\n\n                  </div>\n                </div>\n              </div>\n              <div className=\"footer-content__right\">\n                <div className=\"footer-content__wrapper\">\n                  <nav className=\"footer-content__nav\">\n                    <a className=\"footer-content__nav-link\" href=\"index.html\">Home</a>\n                    {/*<a className=\"footer-content__nav-link\" href=\"#rarity\">Rarity</a>*/}\n                    {/*<a className=\"footer-content__nav-link\" href=\"#benefits\">Benefits</a>*/}\n                  </nav>\n                  <nav className=\"footer-content__nav\">\n\n                    {/*<a className=\"footer-content__nav-link\" href=\"#roadmap\">Roadmap</a>*/}\n                    {/*<a className=\"footer-content__nav-link\" href=\"#faq\">FAQ</a>*/}\n                  </nav>\n\n                </div>\n              </div>\n            </div>\n            <div className=\"footer-copyright\">\n              <p className=\"footer-copyright__text\">Copyright © 2021. All rights reserved</p>\n\n            </div>\n          </div>\n        </footer>\n      </div>\n\n  );\n}\n\n\n\nexport default Header;"]},"metadata":{},"sourceType":"module"}